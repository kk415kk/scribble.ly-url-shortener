<html>
  <head>
    <title>Kevin's Mad Libs</title>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link type="text/css" rel="stylesheet" href="style.css">
  </head>

  <body>
    <h1>Madlib Form</h1>
    <div id="flashMessage">
    </div>

    <form id="madlib-form" onsubmit="process();">
      <label>Type of Animal: </label><input type="text" name="animal" placeholder="dog"><br>
      <br>
      <label>Favorite Number: </label><input type="number" name="number" placeholder="5"><br>
      <br>

      <label>Favorite Color:</label><br>
      <input type="radio" name="color" value="red" checked>Red<br>
      <input type="radio" name="color" value="blue">Blue<br>
      <br>

      <label>Favorite Transportation</label>
      <input type="checkbox" name="transportation" value="bike">Bike<br>
      <input type="checkbox" name="transportation" value="car">Car 

      <label>Favorite Food:</label>
      <select name="food">
        <option value="sushi">Sushi</option>
        <option value="apple">Apple</option>
      </select>
      
      <br>
      <input type="submit" value="Submit">
    </form>

    <br>
    <div id="#mad-lib">
    </div>

    <hr>

    <footer class="footer">
      <div>
        Extra Credit: <a href="extra_credit/credit_card.html">Credit Card Validator</a>, based on Luhn's algorithm
      </div>
    </footer>

    <script>
      $("#madlib-form").submit(function(event) {
        event.preventDefault();
        var values = $(this).serialize().split("&");
        var form_fields = {};

        for (var i = 0; i < values.length; i++) {
          key_val_pair = values[i].split("=");
          field = key_val_pair[0];
          value = key_val_pair[1];
          form_fields[field] = value;
        }

        var errors = 0;
        errors += verifyStr(form_fields['animal']);
        errors += verifyNum(form_fields['number']);
        errors += verifyStr(form_fields['color']);
        errors += verifyStr(form_fields['food']);

        if (errors != 0) {
          displayErr();
          return false;
        } else {
          insertHTML(form_fields);
          return true;
        }
      });

      function verifyStr(str) {
        return str && typeof str == 'string' ? 0 : 1;
      }

      function verifyNum(num) {
        return num && !isNaN(parseInt(num)) ? 0 : 1;
      }

      function insertHTML(fields) {
        html = ""
        html += "<h2>Madlib</h2>"
        html += "<p>There once was a mad lib created by a <u>" + fields['animal'] + "</u> named Kevin. ";
        html += "His <u>" + fields['color'] + "</u> keyboard was all he needed to create this spectacular mad lib. ";
        html += "Unfortunately, his creativity ran out when <u>" + fields['number'].toString() + "</u> <u>" + fields['food'] + "</u> fell off the table. ";
        html += "And that is why his mad lib has to end here :-(</p>";
        document.getElementById("#mad-lib").innerHTML = html;
      }


      function displayErr() {
        document.getElementById("flashMessage").innerHTML = "Please fill in all fields correctly.";
      }

      function cancelErr() {
        document.getElementById("flashMessage").innerHTML = "";
      }
    </script>
  </body>

</html>
